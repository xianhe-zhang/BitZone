{"ast":null,"code":"import _regeneratorRuntime from\"/Users/marioxzhang/Desktop/bitzone-finished/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/marioxzhang/Desktop/bitzone-finished/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/marioxzhang/Desktop/bitzone-finished/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext}from'react';import{useHistory}from'react-router-dom';import Input from'../../shared/components/FormElements/Input';import Button from'../../shared/components/FormElements/Button';import ErrorModal from'../../shared/components/UIElements/ErrorModal';import LoadingSpinner from'../../shared/components/UIElements/LoadingSpinner';import ImageUpload from'../../shared/components/FormElements/ImageUpload';import{VALIDATOR_REQUIRE,VALIDATOR_MINLENGTH}from'../../shared/util/validators';import{useForm}from'../../shared/hooks/form-hook';import{useHttpClient}from'../../shared/hooks/http-hook';import{AuthContext}from'../../shared/context/auth-context';import'./PlaceForm.css';var NewPlace=function NewPlace(){var auth=useContext(AuthContext);var _useHttpClient=useHttpClient(),isLoading=_useHttpClient.isLoading,error=_useHttpClient.error,sendRequest=_useHttpClient.sendRequest,clearError=_useHttpClient.clearError;var _useForm=useForm({title:{value:'',isValid:false},description:{value:'',isValid:false},address:{value:'',isValid:false},image:{value:null,isValid:false}},false),_useForm2=_slicedToArray(_useForm,2),formState=_useForm2[0],inputHandler=_useForm2[1];var history=useHistory();var placeSubmitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var formData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;formData=new FormData();formData.append('title',formState.inputs.title.value);formData.append('description',formState.inputs.description.value);formData.append('address',formState.inputs.address.value);formData.append('image',formState.inputs.image.value);_context.next=9;return sendRequest('http://localhost:5000/api/places','POST',formData,{Authorization:'Bearer '+auth.token});case 9:history.push('/');_context.next=14;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return function placeSubmitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ErrorModal,{error:error,onClear:clearError}),/*#__PURE__*/React.createElement(\"form\",{className:\"place-form\",onSubmit:placeSubmitHandler},isLoading&&/*#__PURE__*/React.createElement(LoadingSpinner,{asOverlay:true}),/*#__PURE__*/React.createElement(Input,{id:\"title\",element:\"input\",type:\"text\",label:\"Title\",validators:[VALIDATOR_REQUIRE()],errorText:\"Please enter a valid title.\",onInput:inputHandler}),/*#__PURE__*/React.createElement(Input,{id:\"description\",element:\"textarea\",label:\"Description\",validators:[VALIDATOR_MINLENGTH(5)],errorText:\"Please enter a valid description (at least 5 characters).\",onInput:inputHandler}),/*#__PURE__*/React.createElement(Input,{id:\"address\",element:\"input\",label:\"Address\",validators:[VALIDATOR_REQUIRE()],errorText:\"Please enter a valid address.\",onInput:inputHandler}),/*#__PURE__*/React.createElement(ImageUpload,{id:\"image\",onInput:inputHandler,errorText:\"Please provide an image.\"}),/*#__PURE__*/React.createElement(Button,{type:\"submit\",disabled:!formState.isValid},\"ADD PLACE\")));};export default NewPlace;","map":{"version":3,"sources":["/Users/marioxzhang/Desktop/bitzone-finished/frontend/src/places/pages/NewPlace.js"],"names":["React","useContext","useHistory","Input","Button","ErrorModal","LoadingSpinner","ImageUpload","VALIDATOR_REQUIRE","VALIDATOR_MINLENGTH","useForm","useHttpClient","AuthContext","NewPlace","auth","isLoading","error","sendRequest","clearError","title","value","isValid","description","address","image","formState","inputHandler","history","placeSubmitHandler","event","preventDefault","formData","FormData","append","inputs","Authorization","token","push"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport Input from '../../shared/components/FormElements/Input';\nimport Button from '../../shared/components/FormElements/Button';\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\nimport ImageUpload from '../../shared/components/FormElements/ImageUpload';\nimport {\n  VALIDATOR_REQUIRE,\n  VALIDATOR_MINLENGTH\n} from '../../shared/util/validators';\nimport { useForm } from '../../shared/hooks/form-hook';\nimport { useHttpClient } from '../../shared/hooks/http-hook';\nimport { AuthContext } from '../../shared/context/auth-context';\nimport './PlaceForm.css';\n\nconst NewPlace = () => {\n  const auth = useContext(AuthContext);\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\n  const [formState, inputHandler] = useForm(\n    {\n      title: {\n        value: '',\n        isValid: false\n      },\n      description: {\n        value: '',\n        isValid: false\n      },\n      address: {\n        value: '',\n        isValid: false\n      },\n      image: {\n        value: null,\n        isValid: false\n      }\n    },\n    false\n  );\n\n  const history = useHistory();\n\n  const placeSubmitHandler = async event => {\n    event.preventDefault();\n    try {\n      const formData = new FormData();\n      formData.append('title', formState.inputs.title.value);\n      formData.append('description', formState.inputs.description.value);\n      formData.append('address', formState.inputs.address.value);\n      formData.append('image', formState.inputs.image.value);\n      await sendRequest('http://localhost:5000/api/places', 'POST', formData, {\n        Authorization: 'Bearer ' + auth.token\n      });\n      history.push('/');\n    } catch (err) {}\n  };\n\n  return (\n    <React.Fragment>\n      <ErrorModal error={error} onClear={clearError} />\n      <form className=\"place-form\" onSubmit={placeSubmitHandler}>\n        {isLoading && <LoadingSpinner asOverlay />}\n        <Input\n          id=\"title\"\n          element=\"input\"\n          type=\"text\"\n          label=\"Title\"\n          validators={[VALIDATOR_REQUIRE()]}\n          errorText=\"Please enter a valid title.\"\n          onInput={inputHandler}\n        />\n        <Input\n          id=\"description\"\n          element=\"textarea\"\n          label=\"Description\"\n          validators={[VALIDATOR_MINLENGTH(5)]}\n          errorText=\"Please enter a valid description (at least 5 characters).\"\n          onInput={inputHandler}\n        />\n        <Input\n          id=\"address\"\n          element=\"input\"\n          label=\"Address\"\n          validators={[VALIDATOR_REQUIRE()]}\n          errorText=\"Please enter a valid address.\"\n          onInput={inputHandler}\n        />\n        <ImageUpload\n          id=\"image\"\n          onInput={inputHandler}\n          errorText=\"Please provide an image.\"\n        />\n        <Button type=\"submit\" disabled={!formState.isValid}>\n          ADD PLACE\n        </Button>\n      </form>\n    </React.Fragment>\n  );\n};\n\nexport default NewPlace;\n"]},"metadata":{},"sourceType":"module"}