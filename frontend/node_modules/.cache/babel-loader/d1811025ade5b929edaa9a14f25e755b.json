{"ast":null,"code":"import _regeneratorRuntime from\"/Users/marioxzhang/Desktop/bitzone-finished/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/marioxzhang/Desktop/bitzone-finished/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/marioxzhang/Desktop/bitzone-finished/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import Card from'../../shared/components/UIElements/Card';import Button from'../../shared/components/FormElements/Button';import Modal from'../../shared/components/UIElements/Modal';import Map from'../../shared/components/UIElements/Map';import ErrorModal from'../../shared/components/UIElements/ErrorModal';import LoadingSpinner from'../../shared/components/UIElements/LoadingSpinner';import{AuthContext}from'../../shared/context/auth-context';import{useHttpClient}from'../../shared/hooks/http-hook';import'./PlaceItem.css';var PlaceItem=function PlaceItem(props){var _useHttpClient=useHttpClient(),isLoading=_useHttpClient.isLoading,error=_useHttpClient.error,sendRequest=_useHttpClient.sendRequest,clearError=_useHttpClient.clearError;var auth=useContext(AuthContext);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showMap=_useState2[0],setShowMap=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showConfirmModal=_useState4[0],setShowConfirmModal=_useState4[1];var openMapHandler=function openMapHandler(){return setShowMap(true);};var closeMapHandler=function closeMapHandler(){return setShowMap(false);};var showDeleteWarningHandler=function showDeleteWarningHandler(){setShowConfirmModal(true);};var cancelDeleteHandler=function cancelDeleteHandler(){setShowConfirmModal(false);};var confirmDeleteHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setShowConfirmModal(false);_context.prev=1;_context.next=4;return sendRequest(\"http://localhost:5000/api/places/\".concat(props.id),'DELETE',null,{Authorization:'Bearer '+auth.token});case 4:props.onDelete(props.id);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);case 9:case\"end\":return _context.stop();}}},_callee,null,[[1,7]]);}));return function confirmDeleteHandler(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ErrorModal,{error:error,onClear:clearError}),/*#__PURE__*/React.createElement(Modal,{show:showMap,onCancel:closeMapHandler,header:props.address,contentClass:\"place-item__modal-content\",footerClass:\"place-item__modal-actions\",footer:/*#__PURE__*/React.createElement(Button,{onClick:closeMapHandler},\"CLOSE\")},/*#__PURE__*/React.createElement(\"div\",{className:\"map-container\"},/*#__PURE__*/React.createElement(Map,{center:props.coordinates,zoom:16}))),/*#__PURE__*/React.createElement(Modal,{show:showConfirmModal,onCancel:cancelDeleteHandler,header:\"Are you sure?\",footerClass:\"place-item__modal-actions\",footer:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button,{inverse:true,onClick:cancelDeleteHandler},\"CANCEL\"),/*#__PURE__*/React.createElement(Button,{danger:true,onClick:confirmDeleteHandler},\"DELETE\"))},/*#__PURE__*/React.createElement(\"p\",null,\"Do you want to proceed and delete this place? Please note that it can't be undone thereafter.\")),/*#__PURE__*/React.createElement(\"li\",{className:\"place-item\"},/*#__PURE__*/React.createElement(Card,{className:\"place-item__content\"},isLoading&&/*#__PURE__*/React.createElement(LoadingSpinner,{asOverlay:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"place-item__image\"},/*#__PURE__*/React.createElement(\"img\",{src:\"http://localhost:5000/\".concat(props.image),alt:props.title})),/*#__PURE__*/React.createElement(\"div\",{className:\"place-item__info\"},/*#__PURE__*/React.createElement(\"h2\",null,props.title),/*#__PURE__*/React.createElement(\"h3\",null,props.address),/*#__PURE__*/React.createElement(\"p\",null,props.description)),/*#__PURE__*/React.createElement(\"div\",{className:\"place-item__actions\"},/*#__PURE__*/React.createElement(Button,{inverse:true,onClick:openMapHandler},\"VIEW ON MAP\"),auth.userId===props.creatorId&&/*#__PURE__*/React.createElement(Button,{to:\"/places/\".concat(props.id)},\"EDIT\"),auth.userId===props.creatorId&&/*#__PURE__*/React.createElement(Button,{danger:true,onClick:showDeleteWarningHandler},\"DELETE\")))));};export default PlaceItem;","map":{"version":3,"sources":["/Users/marioxzhang/Desktop/bitzone-finished/frontend/src/places/components/PlaceItem.js"],"names":["React","useState","useContext","Card","Button","Modal","Map","ErrorModal","LoadingSpinner","AuthContext","useHttpClient","PlaceItem","props","isLoading","error","sendRequest","clearError","auth","showMap","setShowMap","showConfirmModal","setShowConfirmModal","openMapHandler","closeMapHandler","showDeleteWarningHandler","cancelDeleteHandler","confirmDeleteHandler","id","Authorization","token","onDelete","address","coordinates","image","title","description","userId","creatorId"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\n\nimport Card from '../../shared/components/UIElements/Card';\nimport Button from '../../shared/components/FormElements/Button';\nimport Modal from '../../shared/components/UIElements/Modal';\nimport Map from '../../shared/components/UIElements/Map';\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\nimport { AuthContext } from '../../shared/context/auth-context';\nimport { useHttpClient } from '../../shared/hooks/http-hook';\nimport './PlaceItem.css';\n\nconst PlaceItem = props => {\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\n  const auth = useContext(AuthContext);\n  const [showMap, setShowMap] = useState(false);\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\n\n  const openMapHandler = () => setShowMap(true);\n\n  const closeMapHandler = () => setShowMap(false);\n\n  const showDeleteWarningHandler = () => {\n    setShowConfirmModal(true);\n  };\n\n  const cancelDeleteHandler = () => {\n    setShowConfirmModal(false);\n  };\n\n  const confirmDeleteHandler = async () => {\n    setShowConfirmModal(false);\n    try {\n      await sendRequest(\n        `http://localhost:5000/api/places/${props.id}`,\n        'DELETE',\n        null,\n        {\n          Authorization: 'Bearer ' + auth.token\n        }\n      );\n      props.onDelete(props.id);\n    } catch (err) {}\n  };\n\n  return (\n    <React.Fragment>\n      <ErrorModal error={error} onClear={clearError} />\n      <Modal\n        show={showMap}\n        onCancel={closeMapHandler}\n        header={props.address}\n        contentClass=\"place-item__modal-content\"\n        footerClass=\"place-item__modal-actions\"\n        footer={<Button onClick={closeMapHandler}>CLOSE</Button>}\n      >\n        <div className=\"map-container\">\n          <Map center={props.coordinates} zoom={16} />\n        </div>\n      </Modal>\n      <Modal\n        show={showConfirmModal}\n        onCancel={cancelDeleteHandler}\n        header=\"Are you sure?\"\n        footerClass=\"place-item__modal-actions\"\n        footer={\n          <React.Fragment>\n            <Button inverse onClick={cancelDeleteHandler}>\n              CANCEL\n            </Button>\n            <Button danger onClick={confirmDeleteHandler}>\n              DELETE\n            </Button>\n          </React.Fragment>\n        }\n      >\n        <p>\n          Do you want to proceed and delete this place? Please note that it\n          can't be undone thereafter.\n        </p>\n      </Modal>\n      <li className=\"place-item\">\n        <Card className=\"place-item__content\">\n          {isLoading && <LoadingSpinner asOverlay />}\n          <div className=\"place-item__image\">\n            <img\n              src={`http://localhost:5000/${props.image}`}\n              alt={props.title}\n            />\n          </div>\n          <div className=\"place-item__info\">\n            <h2>{props.title}</h2>\n            <h3>{props.address}</h3>\n            <p>{props.description}</p>\n          </div>\n          <div className=\"place-item__actions\">\n            <Button inverse onClick={openMapHandler}>\n              VIEW ON MAP\n            </Button>\n            {auth.userId === props.creatorId && (\n              <Button to={`/places/${props.id}`}>EDIT</Button>\n            )}\n\n            {auth.userId === props.creatorId && (\n              <Button danger onClick={showDeleteWarningHandler}>\n                DELETE\n              </Button>\n            )}\n          </div>\n        </Card>\n      </li>\n    </React.Fragment>\n  );\n};\n\nexport default PlaceItem;\n"]},"metadata":{},"sourceType":"module"}